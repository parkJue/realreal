{% extends 'owaste/base.html' %}
{% block content %}
        <style>
            .display-none{display: none;}
            .wrap {position: absolute;left: 0;bottom: 40px;width: 322px;height: 132px;margin-left: -144px;text-align: left;overflow: hidden;font-size: 12px;font-family: 'Malgun Gothic', dotum, '돋움', sans-serif;line-height: 1.5;}
            .wrap * {padding: 0;margin: 0;}
            .wrap .info {width: 320px;height: 120px;border-radius: 5px;border-bottom: 2px solid #ccc;border-right: 1px solid #ccc;overflow: hidden;background: #fff;}
            .wrap .info:nth-child(1) {border: 0;box-shadow: 0px 1px 2px #888;}
            .info .title {padding: 5px 0 0 10px;height: 30px;background: #eee;border-bottom: 1px solid #ddd;font-size: 18px;font-weight: bold;}
            .info .close {position: absolute;top: 10px;right: 10px;color: #888;width: 17px;height: 17px;background: url('https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/overlay_close.png');}
            .info .close:hover {cursor: pointer;}
            .info .body {position: relative;overflow: hidden;}
            .info .desc {position: relative;margin: 13px 0 0 90px;height: 75px;}
            .desc .ellipsis {overflow: hidden;text-overflow: ellipsis;white-space: nowrap;}
            .desc .jibun {font-size: 11px;color: #888;margin-top: -2px;}
            .info .img {position: absolute;top: 6px;left: 5px;width: 73px;height: 71px;border: 1px solid #ddd;color: #888;overflow: hidden;}
            .info:after {content: '';position: absolute;margin-left: -12px;left: 50%;bottom: 0;width: 22px;height: 12px;background: url('https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/vertex_white.png')}
            .info .link {color: #5085BB;}
        </style>

    <!-- content 시작 -->
        <br>
        <h2 style="text-align:center;color:#3498DB;">OWASTE에 오신 걸 환영합니다!</h2>
        <h5 style="text-align:center;color:#9E9E9E;">지금 바로 당신 근처의 제로 웨이스트를 실천해 보세요.</h5>
        <br>
        <br>
        <div class="d-grid gap-2 col-1 mx-auto">
            <button class="btn btn-primary" type="button">더 알아보기</button>
        </div>
        <br>
        <br>


        <!-- 제로 웨이스트를 아시나요? -->
        <section class="py-5 text-center container">
            <div class="p-4 p-md-5 mb-4 rounded text-bg-white">
             <div class="col-md-12 px-0">
               <h1 class="display-4 fst-italic">쓰레기를 줄이는 소비,</h1>
               <h1 class="display-4 fst-italic">‘제로 웨이스트’를 아시나요?</h1>
               <img src ='/static/img/zerowaste.jpg' alt = 'zerowaste' height = '400'>
               <h6>출처: Korea Post</h6>
               <br>
               <p class="lead my-3" align="left" style="color:#9E9E9E;">숫자인 ‘제로(Zero)’와 쓰레기를 의미하는 ‘웨이스트(Waste)’를 합쳐서 ‘쓰레기가 하나도 없게 만들자’라는 뜻이 바로 ‘제로 웨이스트’입니다.</p>
               <p class="lead my-3" align="left" style="color:#9E9E9E;">제로 웨이스트의 목표는 ‘쓰레기 없애기’와 ‘생활 쓰레기 최소화하기’라고 할 수 있는데요.</p>
               <p class="lead my-3" align="left" style="color:#9E9E9E;">하지만 현실적으로 쓰레기가 아예 발생하지 않는 것은 불가하므로 줄이고, 재활용하고, 아끼는 등의 다양한 방법으로 쓰레기를 줄여나가는 방법으로 실천합니다.</p>
               <p class="lead my-3" align="left" style="color:#9E9E9E;">쉽게 얘기하자면 일상생활에서 사용되는  모든 자원, 제품들을 재활용할 수 있도록 하는 운동인데요.</p>
               <p class="lead my-3" align="left" style="color:#9E9E9E;">비슷한 표현으로는 ‘리스 웨이스트(Less Waste)’와 조금은 다르지만, 건강과 환경을 위해서 플라스틱을 줄이는 ‘플라스틱 프리’운동도 있습니다.</p>
             </div>
            </div>
         </section>

        <!-- 왜 제로 웨이스트를 해야 할까요? -->
        <section class="py-5 text-center container">
            <div class="p-4 p-md-5 mb-4 text-bg-dark">
             <div class="col-md-12 px-0">
               <h1 class="display-4 fst-italic">왜 제로 웨이스트를 해야 할까요?</h1>
               <br>

               <div class="row align-items-md-stretch">

                <div class="col-md-6">
                    <div class="h-400 p-5 bg-dark">
                    <img src ='/static/img/now.jpg' alt = 'zerowaste' width = '480'>
                    </div>
                </div>

                <div class="col-md-6 bg-dark">
                <div class="h-400 p-6">
                    <br>
                    <br>
                    <p class="lead my-3" align="left" style="color:#ffffff;">유엔환경계획에 따르면 매년 3억톤의 플라스틱이 생산되고 있는데 그 중, 1천만톤이 바다에 버려집니다. 이렇게 생산되어 한번 사용되고 버려진 플라스틱은 썩지않고 전세계 바다를 이리저리 떠다니게 됩니다.</p>
                    <p class="lead my-3" align="left" style="color:#ffffff;">부유하는 플라스틱 폐기물들은 파도와 햇빛에 의해 작은 입자로 부서져 미세 플라스틱으로 바뀌거나 해양 생물의 몸에 쌓여 죽음에 이르게하는 등 생태계 파괴의 큰 요인으로 자리잡습니다. 바다의 미세 플라스틱은 생태계의 먹이사슬에 따라 동식물의 체내에 누적되고 있으며 결국 우리가 버린 플라스틱 폐기물이 우리 몸속까지 침투해 들어오는 결과가 초래됩니다.</p>
                    <h6>출처: TENANT NEWS</h6>
                </div>
                </div>

            </div>
             </div>
            </div>
         </section>

        <!-- 우리는 어떻게 제로 웨이스트를 할 수 있을까요? -->
        <section class="py-5 text-center container">
            <div class="p-4 p-md-5 mb-4 rounded text-bg-white">
             <div class="col-md-12 px-0">
               <h1 class="display-4 fst-italic">우리는 어떻게 제로 웨이스트를 할 수 있을까요?</h1>
               <p class="lead my-3">플라스틱 문제의 심각성에 대해 느끼셨나요? 그래서 시작을 해보고는 싶은데 어떻게 시작해야 할지 모르겠나요?</p>


               <div class="row align-items-md-stretch bg-white">

                <div class="col-md-6 bg-white">
                    <div class="h-400 p-5">
                    <img src ='/static/img/shop.jpg' alt = 'zerowaste' width = '480' height="350">
                    <h6 style="color:#ffffff;">-</h6>
                    <h6 style="color:#9E9E9E;">출처: 부산일보</h6>
                    <p class="lead my-3" align="left" style="color:#434343;">제로 웨이스트 실천이 어렵다고 느껴지는 입문자가 가장 쉽게 시작할 수 있는 방법은 바로 ‘제로 웨이스트샵’에 방문하는 것입니다. 이 곳에 가면 일상생활에서 사용하던 물건을 손쉽게 제로 웨이스트 제품으로 바꾸어 사용할 수 있기 때문입니다. 생활용품이 떨어졌을 때 마트나 편의점 대신 이 곳을 먼저 찾는다면 쓰레기를 줄여나갈 수 있습니다.</p>
                    <br>
                    <a href="/owaste/shop_search/"><button class="btn btn-primary" type="button">매장 방문하러 가기</button></a>
                </div>
                </div>

                <div class="col-md-6 bg-white">
                    <div class="h-400 p-5">
                        <img src ='/static/img/campaign.jpg' alt = 'zerowaste' width = '480' height="350">
                        <h6 style="color:#ffffff;">-</h6>
                        <h6 style="color:#9E9E9E;">출처: 환경운동연합</h6>
                        <p class="lead my-3" align="left" style="color:#434343;">더불어 뜻이 같은 사람들과 함께 캠페인이나 챌린지에 참여하는 방법도 있습니다. 매장에서 음료 등을 주문할 때 빨대 사용하지 않기, 테이크아웃, 배달 등을 할 때 일회용기 사용하지 않기, 재사용 가능한 물병, 텀블러 이용하기, 쇼핑할 때 장바구니 이용하기, 유리 제품 이용하기 등 혼자서 하다보면 잊기 쉽고 의지를 잃기 쉽지만 함께 함으로써 지속적인 행동을 추구합니다.</p>
                        <br>
                        <a href="/owaste/campaign_list/"><button class="btn btn-primary" type="button">캠페인 참여하러 가기</button></a>
                    </div>
                </div>
                </div>
            </div>
             </div>
            </div>
         </section>

            <!-- <section class="py-5 text-center container">

                <div class="row align-items-md-stretch">

                    <div class="col-md-6">
                        <div class="h-400 p-5 bg-white">
                        <img src ='/static/img/zerowaste.jpg' alt = 'zerowaste' height = '400'>
                        <h6>출처: Korea Post</h6>
                        </div>
                    </div>

                    <div class="col-md-6">
                    <div class="h-400 p-5 bg-white">
                        <h2 align="left">쓰레기를 줄이는 소비,</h2>
                        <h2 align="left">‘제로 웨이스트’를 아시나요?</h2>
                        <br>
                        <p><h4 align="left" style="color:#9E9E9E;">숫자인 ‘제로(Zero)’와</h4></p>
                        <p><h4 align="left" style="color:#9E9E9E;">쓰레기를 의미하는 ‘웨이스트(Waste)’를 합쳐서</h4></p>
                        <p><h4 align="left" style="color:#9E9E9E;">‘쓰레기가 하나도 없게 만들자’라는 뜻이</h4></p>
                        <p><h4 align="left" style="color:#9E9E9E;">바로 ‘제로 웨이스트’입니다.</h4></p>
                        <br>
                    </div>
                    </div>

                </div>

           </section> -->
            <!-- <section class="py-5 text-center container">
                <div class="row align-items-md-stretch">

                    <div class="col-md-6">
                        <div class="h-400 p-5 bg-white">
                            <p><h4 align="right" style="color:#9E9E9E;">제로 웨이스트의 목표는 ‘쓰레기 없애기’와</h4></p>
                            <p><h4 align="right" style="color:#9E9E9E;">‘생활 쓰레기 최소화하기’라고 할 수 있는데요.</h4></p>
                            <br>
                            <p><h4 align="right" style="color:#9E9E9E;">하지만 현실적으로</h4></p>
                            <p><h4 align="right" style="color:#9E9E9E;">쓰레기가 아예 발생하지 않는 것은 불가하므로</h4></p>
                            <p><h4 align="right" style="color:#9E9E9E;">줄이고, 재활용하고, 아끼는 등의 다양한 방법으로</h4></p>
                            <p><h4 align="right" style="color:#9E9E9E;">쓰레기를 줄여나가는 방법으로 실천합니다.</h4></p>
                            <br>
                            <p><h4 align="right" style="color:#9E9E9E;">쉽게 얘기하자면 일상생활에서 사용되는 </h4></p>
                            <p><h4 align="right" style="color:#9E9E9E;">모든 자원, 제품들을 재활용할 수 있도록 하는 운동인데요.</h4></p>
                            <br>
                            <p><h4 align="right" style="color:#9E9E9E;">비슷한 표현으로는</h4></p>
                            <p><h4 align="right" style="color:#9E9E9E;">건강과 환경을 위해서 플라스틱을 줄이는</h4></p>
                            <p><h4 align="right" style="color:#9E9E9E;">‘플라스틱 프리’운동도 있습니다.</h4></p>
                        </div>
                        </div>
                    
                    <div class="col-md-6">
                        <div class="h-400 p-5 bg-white">
                        <img src ='/static/img/zerowaste.jpg' alt = 'zerowaste' height = '400'>
                        <h6>출처: Korea Post</h6>
                        </div>
                    </div>

                </div>
           </section>

           <section class="py-5 text-center container">

            <div class="row align-items-md-stretch">

                <div class="col-md-6">
                    <div class="h-400 p-5 bg-white">
                    <img src ='/static/img/zerowaste.jpg' alt = 'zerowaste' height = '400'>
                    <h6>출처: Korea Post</h6>
                    </div>
                </div>

                <div class="col-md-6">
                <div class="h-400 p-5 bg-white">
                    <h2 align="left">쓰레기를 줄이는 소비,</h2>
                    <h2 align="left">‘제로 웨이스트’를 아시나요?</h2>
                    <br>
                    <p><h4 align="left" style="color:#9E9E9E;">숫자인 ‘제로(Zero)’와</h4></p>
                    <p><h4 align="left" style="color:#9E9E9E;">쓰레기를 의미하는 ‘웨이스트(Waste)’를 합쳐서</h4></p>
                    <p><h4 align="left" style="color:#9E9E9E;">‘쓰레기가 하나도 없게 만들자’라는 뜻이</h4></p>
                    <p><h4 align="left" style="color:#9E9E9E;">바로 ‘제로 웨이스트’입니다.</h4></p>
                    <br>
                </div>
                </div>

            </div>

       </section> -->

           <section class="py-6 text-center container">

               {% for x in shop_map %}
                    <input type="hidden" name = "name[]" class = "" value="{{x.name}}">
                    </input>
                    <input type="hidden" name = "id[]" class = "" value="{{x.id}}">
                    </input>
                    <input type="hidden" name = "category[]" class = "display-none" value="{{x.category}}"> 
                    </input>
                    <input type="hidden" name = "subject[]" class = "display-none" value="{{x.subject}}">
                    </input>
                    <input type="hidden" name = "facility[]" class = "display-none" value="{{x.facility}}">
                    </input>
                    <input type="hidden" name = "tel[]" class = "display-none" value=" {{x.tel}}">
                    </input>
                    <input type="hidden" name = "address[]" class = "" value="{{x.address}}">
                    </input>
                    <input type="hidden" name = "img[]" class = "display-none" value="{{x.img}}">
                    </input>
                    <input type="hidden" name = "lat[]" class = "" value="{{x.lat}}">
                    </input>
                    <input type="hidden" name = "lng[]" class = "" value="{{x.lon}}"> 
                    </input>
                {% endfor %}




                    <!--지도 시작-->
                    <div id="map" style="width:100%;height:500px;"></div>
                    
                    <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=e8fbce99a1e42bcc4a552065f107e65f"></script>
                    
                    <script>

                        var container = document.getElementById('map');
                        var options = {
                            center: new kakao.maps.LatLng(37.300538, 126.838613),
                            level: 7
                        };

                        var map = new kakao.maps.Map(container, options);

                        function setCenterbyCurrent() {
                            if (!navigator.geolocation) {
                                throw "위치 정보가 지원되지 않습니다.";
                            }
                            navigator.geolocation.getCurrentPosition(function({ coords, timestamp }){
                                const latitude = coords.latitude;   // 위도
                                const longitude = coords.longitude; // 경도
                            
                                // alert(`위도: ${latitude}, 경도: ${longitude}, 위치 반환 시간: ${timestamp}`);
                                var moveLatLon = new kakao.maps.LatLng(latitude+0.03, longitude-0.03);
    
                                // 지도 중심을 이동 시킵니다
                                map.setCenter(moveLatLon);
                            });
                        }
                        setCenterbyCurrent();

                        var list_name = document.getElementsByName("name[]");
                        var list_id = document.getElementsByName("id[]");
                        var list_category = document.getElementsByName("category[]");
                        var list_subject = document.getElementsByName("subject[]");
                        var list_facility = document.getElementsByName("facility[]");
                        var list_tel = document.getElementsByName("tel[]");
                        var list_address = document.getElementsByName("address[]");
                        var list_img = document.getElementsByName("img[]");
                        var list_lat = document.getElementsByName("lat[]");
                        var list_lng = document.getElementsByName("lng[]");
                        
                        var shopCoordinate = new Array();
                        var overlays = [];

                        // 커스텀 오버레이 표시하는 함수입니다 
                        function makeOverListener(map, marker, overlay) {
                            return function() {
                                closeOverlay();
                                overlay.setMap(map);
                            };
                        }

                        // 커스텀 오버레이를 닫기 위해 호출되는 함수입니다 
                        function closeOverlay() {
                            for (var i = 0; i < overlays.length; i++) {
                                overlays[i].setMap(null);
                            } 
                        }
                
                        for (var i = 0; i <list_lat.length; i++)
                        {   
                            var imageSize = new kakao.maps.Size(50, 50), // 마커이미지의 크기입니다
                                imageOption = {offset: new kakao.maps.Point(11, 50)}; // 마커이미지의 옵션입니다. 마커의 좌표와 일치시킬 이미지 안에서의 좌표를 설정합니다.
                                
                                if (list_category[i].value == '종합생활용품') {
                                    imageSrc = "/static/img/red.png";
                                } else if (list_category[i].value == '공방') {
                                    imageSrc = '/static/img/orange.png';
                                } else if (list_category[i].value == '카페') {
                                    imageSrc = '/static/img/yellow.png';
                                } else if (list_category[i].value == '서점') {
                                    imageSrc = '/static/img/green.png';
                                } else if (list_category[i].value == '식료품') {
                                    imageSrc = '/static/img/blue.png';
                                } else {
                                    imageSrc = '/static/img/purple.png';
                                }

                            // 마커의 이미지정보를 가지고 있는 마커이미지를 생성합니다
                            var markerImage = new kakao.maps.MarkerImage(imageSrc, imageSize, imageOption);

                            var marker = new kakao.maps.Marker({
                                map: map,
                                position: new kakao.maps.LatLng(list_lat[i].value,list_lng[i].value),
                                title: list_name[i].value,
                                image: markerImage
                            });
                            
                            var content = '<div class="wrap">' + 
                            '    <div class="info">' + 
                            '        <div class="title">' + 
                                list_name[i].value + 
                            '            <div class="close" onclick="closeOverlay()" title="닫기"></div>' + 
                            '        </div>' + 
                            '        <div class="body">' + 
                            '            <div class="img">' +
                            '                <img src="'+list_img[i].value+'" width="73" height="70">' +
                            '           </div>' + 
                            '            <div class="desc">' + 
                            '            <div class="jibun ellipsis">'+list_category[i].value+'</div>' + 
                            '                <div class="ellipsis">'+list_address[i].value+'</div>' + 
                            '                <div><a href="http://127.0.0.1:8000/owaste/detail/'+list_id[i].value+'" target="_blank" class="link">상세페이지</a></div>' + 
                            '            </div>' + 
                            '        </div>' + 
                            '    </div>' +    
                            '</div>';

                            var overlay = new kakao.maps.CustomOverlay({
                               content: content,
                               map: map,
                                position: marker.getPosition()       
                            });

                            overlays.push(overlay);
                            overlay.setMap(null);
    
                            kakao.maps.event.addListener(marker, 'click', makeOverListener(map, marker, overlay));
                        
                            
                    }

                    </script>
            </section>
            <br>
            <br>
     <!-- content 끝 -->

 {% endblock content %}